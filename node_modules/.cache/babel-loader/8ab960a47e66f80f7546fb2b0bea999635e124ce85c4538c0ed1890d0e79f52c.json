{"ast":null,"code":"import axios from 'axios';\n// import {ref} from 'vue'\n\nconsole.log(localStorage.getItem('token'));\n// const token = ref(localStorage.getItem('token'))\n\naxios.interceptors.request.use(config => {\n  config.baseURL = 'http://localhost:8000/api';\n  config.headers.Accept = 'application/json';\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  const newToken = response.data.access_token;\n  if (newToken) {\n    localStorage.setItem('token', newToken);\n  }\n  return response;\n}, error => {\n  return Promise.reject(error);\n});\nexport default axios;","map":{"version":3,"names":["axios","console","log","localStorage","getItem","interceptors","request","use","config","baseURL","headers","Accept","token","Authorization","error","Promise","reject","response","newToken","data","access_token","setItem"],"sources":["/Users/vinh/Documents/Kiai/abc_hotel/src/config/index.js"],"sourcesContent":["import axios from 'axios'\n// import {ref} from 'vue'\n\nconsole.log(localStorage.getItem('token'))\n// const token = ref(localStorage.getItem('token'))\n\naxios.interceptors.request.use(\n  (config) => {\n    config.baseURL = 'http://localhost:8000/api'\n    config.headers.Accept = 'application/json'\n    const token = localStorage.getItem('token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n\n    return config\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\naxios.interceptors.response.use(\n  (response) => {\n    const newToken = response.data.access_token\n    if (newToken) {\n      localStorage.setItem('token', newToken)\n    }\n    return response\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\nexport default axios\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB;;AAEAC,OAAO,CAACC,GAAG,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC1C;;AAEAJ,KAAK,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC3BC,MAAM,IAAK;EACVA,MAAM,CAACC,OAAO,GAAG,2BAA2B;EAC5CD,MAAM,CAACE,OAAO,CAACC,MAAM,GAAG,kBAAkB;EAC1C,MAAMC,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIQ,KAAK,EAAE;IACTJ,MAAM,CAACE,OAAO,CAACG,aAAa,GAAI,UAASD,KAAM,EAAC;EAClD;EAEA,OAAOJ,MAAM;AACf,CAAC,EACAM,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAEDd,KAAK,CAACK,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC5BU,QAAQ,IAAK;EACZ,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,IAAI,CAACC,YAAY;EAC3C,IAAIF,QAAQ,EAAE;IACZf,YAAY,CAACkB,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAAC;EACzC;EACA,OAAOD,QAAQ;AACjB,CAAC,EACAH,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAed,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}