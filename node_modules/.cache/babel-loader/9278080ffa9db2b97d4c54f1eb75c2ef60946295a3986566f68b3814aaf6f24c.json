{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from \"@/router\";\nimport axios from \"../config\";\nconst storeConfig = {\n  state: {\n    isLoggedIn: false,\n    token: null\n  },\n  mutations: {\n    login(state, token) {\n      state.isLoggedIn = true;\n      state.token = token;\n      localStorage.setItem('token', token);\n      localStorage.setItem('isLoggedIn', state.isLoggedIn);\n    },\n    logout(state) {\n      state.isLoggedIn = false;\n      state.token = null;\n      localStorage.removeItem('isLoggedIn');\n      localStorage.removeItem('token');\n    }\n  },\n  actions: {\n    async login({\n      commit\n    }, {\n      username,\n      password\n    }) {\n      try {\n        const response = await axios.post('auth/login', {\n          username,\n          password\n        });\n        const token = response.data.access_token;\n        console.log(token);\n        commit('login', token);\n        router.push('/');\n      } catch (error) {\n        console.log(error.response.data);\n        alert(error.response.data);\n      }\n    },\n    logout({\n      commit\n    }) {\n      commit(\"logout\");\n    }\n  },\n  getters: {\n    isLoggedIn: state => state.isLoggedIn,\n    currentUser: state => state.user\n  }\n};\nexport default storeConfig;","map":{"version":3,"names":["router","axios","storeConfig","state","isLoggedIn","token","mutations","login","localStorage","setItem","logout","removeItem","actions","commit","username","password","response","post","data","access_token","console","log","push","error","alert","getters","currentUser","user"],"sources":["/Users/vinh/Documents/Kiai/abc_hotel/src/store/index.js"],"sourcesContent":["import router from \"@/router\";\nimport axios from \"../config\";\nconst storeConfig = {\n  state: {\n    isLoggedIn: false,\n    token: null,\n  },\n\n  mutations: {\n    login(state, token) {\n      state.isLoggedIn = true;\n      state.token = token;\n\n      localStorage.setItem('token', token)\n      localStorage.setItem('isLoggedIn', state.isLoggedIn)\n    },\n    logout(state) {\n      state.isLoggedIn = false\n      state.token = null\n\n      localStorage.removeItem('isLoggedIn')\n      localStorage.removeItem('token')\n      \n    },\n  },\n\n  actions: {\n    async login({ commit }, { username, password }) {\n      try {const response = await axios.post('auth/login', {\n        username,\n        password\n      })\n      const token = response.data.access_token\n      console.log(token)\n      commit('login', token)\n      router.push(  '/' ) }\n      catch (error) {\n        console.log(error.response.data)\n        alert(error.response.data)\n      }\n      },\n    logout({ commit }) {\n      commit(\"logout\");\n    },\n  },\n  getters: {\n    isLoggedIn: (state) => state.isLoggedIn,\n    currentUser: (state) => state.user,\n  },\n};\n\nexport default storeConfig;\n"],"mappings":";AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,WAAW;AAC7B,MAAMC,WAAW,GAAG;EAClBC,KAAK,EAAE;IACLC,UAAU,EAAE,KAAK;IACjBC,KAAK,EAAE;EACT,CAAC;EAEDC,SAAS,EAAE;IACTC,KAAKA,CAACJ,KAAK,EAAEE,KAAK,EAAE;MAClBF,KAAK,CAACC,UAAU,GAAG,IAAI;MACvBD,KAAK,CAACE,KAAK,GAAGA,KAAK;MAEnBG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;MACpCG,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEN,KAAK,CAACC,UAAU,CAAC;IACtD,CAAC;IACDM,MAAMA,CAACP,KAAK,EAAE;MACZA,KAAK,CAACC,UAAU,GAAG,KAAK;MACxBD,KAAK,CAACE,KAAK,GAAG,IAAI;MAElBG,YAAY,CAACG,UAAU,CAAC,YAAY,CAAC;MACrCH,YAAY,CAACG,UAAU,CAAC,OAAO,CAAC;IAElC;EACF,CAAC;EAEDC,OAAO,EAAE;IACP,MAAML,KAAKA,CAAC;MAAEM;IAAO,CAAC,EAAE;MAAEC,QAAQ;MAAEC;IAAS,CAAC,EAAE;MAC9C,IAAI;QAAC,MAAMC,QAAQ,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAAC,YAAY,EAAE;UACnDH,QAAQ;UACRC;QACF,CAAC,CAAC;QACF,MAAMV,KAAK,GAAGW,QAAQ,CAACE,IAAI,CAACC,YAAY;QACxCC,OAAO,CAACC,GAAG,CAAChB,KAAK,CAAC;QAClBQ,MAAM,CAAC,OAAO,EAAER,KAAK,CAAC;QACtBL,MAAM,CAACsB,IAAI,CAAG,GAAI,CAAC;MAAC,CAAC,CACrB,OAAOC,KAAK,EAAE;QACZH,OAAO,CAACC,GAAG,CAACE,KAAK,CAACP,QAAQ,CAACE,IAAI,CAAC;QAChCM,KAAK,CAACD,KAAK,CAACP,QAAQ,CAACE,IAAI,CAAC;MAC5B;IACA,CAAC;IACHR,MAAMA,CAAC;MAAEG;IAAO,CAAC,EAAE;MACjBA,MAAM,CAAC,QAAQ,CAAC;IAClB;EACF,CAAC;EACDY,OAAO,EAAE;IACPrB,UAAU,EAAGD,KAAK,IAAKA,KAAK,CAACC,UAAU;IACvCsB,WAAW,EAAGvB,KAAK,IAAKA,KAAK,CAACwB;EAChC;AACF,CAAC;AAED,eAAezB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}